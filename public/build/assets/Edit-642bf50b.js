import{r as g,j as I,T as $,o as j,a as m,c as f,b as d,u as r,w as u,F as h,Z as O,d as n,k as M,g as x,t as _,C as k,h as N,s as U,v as P}from"./app-81ecaf15.js";import{_ as T}from"./AdminLayout-9ba21bcb.js";import{_ as q}from"./TextInput-184220bf.js";import{_ as D}from"./InputLabel-5c8c373c.js";import{_ as F}from"./BreadCrumb-1ff8e0d2.js";import{E as L,M as R,L as H,a as Z,O as z}from"./flowbite-vue-07e8713d.js";import"./ripple.esm-b4d3c147.js";const G={class:"px-6 py-3"},J={class:"flex justify-between mb-2"},K=n("div",{class:"text-[19px] text-[#333] font-jakarta-semibold pl-2"}," User Role ",-1),Q={class:"bg-white rounded-xl mt-4 min-h-screen"},W={class:"pt-9 pl-[27px] pr-[22px]"},X={class:"grid gap-4 grid-cols-9 mt-4"},Y={class:"col-span-8",style:{width:"60%"}},ee={class:"mt-8 my-6 text-right"},se={class:"flex items-center mb-4"},te=["id"],oe={class:"flex items-center mb-4 col-span-full"},ne=["id","onChange"],ie=n("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Select All",-1),le={class:"flex items-center mb-4"},re=["value","onChange"],ae={for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},de={class:"flex justify-center"},ce=["disabled"],ve={__name:"Edit",props:{permissions:Object,role:Object},setup(v){const s=v,y=g([{value:"Home",route:""},{value:"Roles",route:"#"}]),E=I(),c=$({name:s.role.name,permissions:[]});j(()=>{B()});const a=g(!1),i=g([]);function B(){let t=0;for(const e in s.permissions.permission){for(const o in s.permissions.permission[e])t++,s.role.permissions.forEach(l=>{l.name==s.permissions.permission[e][o].name&&i.value.push(l.name)});setTimeout(()=>{var o=document.getElementById("module_"+e).querySelectorAll("input[name=checkbox]:checked");o.length>0&&(s.permissions.permission[e].length==o.length?document.getElementById("permission_"+e).checked=!0:document.getElementById("permission_"+e).checked=!1)},100)}s.role.permissions.length==t&&(a.value=!0)}function C(){var o;if(a.value=!a.value,i.value=[],a.value)for(var t in s.permissions.permission){for(var e in s.permissions.permission[t])i.value.push((o=s.permissions.permission[t][e])==null?void 0:o.name);document.getElementById("permission_"+t).checked=!0}else for(var t in s.permissions.permission)document.getElementById("permission_"+t).checked=!1}function w(t){i.value.length==s.permissions.count?a.value=!0:a.value=!1;var e=document.getElementById("module_"+t).querySelectorAll("input[name=checkbox]:checked");e.length>0&&(s.permissions.permission[t].length==e.length?document.getElementById("permission_"+t).checked=!0:document.getElementById("permission_"+t).checked=!1)}function S(t,e){for(var o in s.permissions.permission[t])if(e.target.checked){let l=i.value.indexOf(s.permissions.permission[t][o].name);l>-1&&i.value.splice(l,1),i.value.push(s.permissions.permission[t][o].name),e.target.checked=!0}else{let l=i.value.indexOf(s.permissions.permission[t][o].name);l>-1&&i.value.splice(l,1),e.target.checked=!1}V()}function V(){i.value.length==s.permissions.count?a.value=!0:a.value=!1}function A(){i.value.length>0?(c.permissions=i.value,c.put(route("user-roles.update",[s.role.id]),{preserveScroll:!0,onSuccess:()=>{},onError:()=>{}})):E.add({severity:"warn",summary:"Please select one",detail:"Please Select atleast one",life:3e3})}return(t,e)=>(m(),f(h,null,[d(r(O),{title:"Dashboard"}),d(T,null,{default:u(()=>[n("div",G,[n("div",J,[K,n("div",null,[d(F,{data:y.value},null,8,["data"])])]),n("div",Q,[n("div",W,[n("div",X,[n("div",Y,[d(D,{value:"Name",validation:!!r(c).errors.name},null,8,["validation"]),d(q,{type:"text",required:"",modelValue:r(c).name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(c).name=o),placeholder:"Enter Name"},M({_:2},[r(c).errors.name?{name:"validationMessage",fn:u(()=>[x(_(r(c).errors.name),1)]),key:"0"}:void 0]),1032,["modelValue"])]),n("div",ee,[n("div",se,[d(r(L),{label:"Check Alll",onClick:e[1]||(e[1]=o=>C()),modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o)},null,8,["modelValue"])])])]),(m(!0),f(h,null,k(v.permissions.permission,(o,l)=>(m(),N(r(z),{class:"mb-3 border-b dark:border-gray-700"},{default:u(()=>[d(r(R),null,{default:u(()=>[d(r(H),null,{default:u(()=>[x(_(l),1)]),_:2},1024),d(r(Z),null,{default:u(()=>[n("div",{class:"grid gap-1 grid-cols-4 mt-4",id:"module_"+l},[n("div",oe,[n("input",{type:"checkbox",id:"permission_"+l,onChange:p=>S(l,p),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,ne),ie]),(m(!0),f(h,null,k(o,p=>(m(),f("div",le,[U(n("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=b=>i.value=b),value:p.name,onChange:b=>w(l),name:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,re),[[P,i.value]]),n("label",ae,_(p.name),1)]))),256))],8,te)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),n("div",de,[n("button",{type:"button",onClick:e[4]||(e[4]=o=>A()),disabled:r(c).processing,class:"text-white bg-[#171F4C] hover:bg-[#130b29] py-[13px] px-[28px] focus:ring-4 focus:ring-blue-300 font-medium rounded-[10px] text-sm px-5 py-2.5 mr-2 mb-2 focus:outline-none"}," Update",8,ce)])])])])]),_:1})],64))}};export{ve as default};
